# 短信推送助手 (SMS Forwarder)


## 🌟 项目简介

短信推送助手是一款轻量级、开源的Android应用程序，能够自动将收到的短信实时转发到企业微信机器人，确保您不会错过任何重要信息，特别适用于验证码接收、通知提醒等场景。

> **开发声明**：本项目完全由AI助手（GPT-5 & Kimi-K2）协作开发，作者不懂Kotlin语言，展示了现代AI编程的强大能力。

## ✨ 核心功能

### 📱 基础功能
- ✅ **实时短信转发** - 收到短信后立即推送到企业微信
- ✅ **验证码智能识别** - 自动识别并过滤验证码短信
- ✅ **企业微信集成** - 无缝对接企业微信机器人
- ✅ **后台持久运行** - 支持开机自启动，后台稳定运行
- ✅ **前台服务** - Android 8.0+ 适配，确保服务不被系统杀死


### 🔧 技术特点
- **协程异步处理** - 使用Kotlin协程处理网络请求，避免阻塞
- **Material Design** - 遵循Material Design 3.0设计规范
- **深色模式支持** - 自动适配系统深色/浅色主题

## 📋 系统要求

| 项目 | 要求 |
|------|------|
| **最低Android版本** | Android 5.0 (API 21) |
| **目标Android版本** | Android 14 (API 34) |
| **开发语言** | Kotlin 2.0+ |
| **构建工具** | Gradle 8.0+ |
| **JDK版本** | JDK 21 |

## 🚀 快速开始

### 1. 获取企业微信机器人Webhook

1. 登录企业微信群聊
2. 创建机器人
3. 获取机器人的Webhook地址（格式：`https://qyapi.weixin.qq.com/cgi-bin/webhook/send?key=YOUR_KEY`）

### 2. 应用配置

1. **安装应用** - 下载APK并安装到您的Android设备
2. **授予权限** - 根据提示授予短信读取、通知等必要权限
3. **设置Webhook** - 在应用中输入企业微信机器人Webhook地址
4. **启用服务** - 打开开关即可开始短信转发

### 3. 高级设置（可选）

- **验证码模式** - 开启后仅推送包含验证码的短信
- **电池优化** - 将应用添加到电池优化白名单
- **开机启动** - 确保设备重启后自动恢复服务


### 项目结构

```
app/src/main/java/com/yjym/sms2wxwork/
├── MainActivity.kt          # 主界面和配置管理
├── SmsForwardService.kt     # 前台服务
├── SmsReceiver.kt          # 短信广播接收器
├── BootReceiver.kt        # 开机启动接收器
├── WechatWorkNotifier.kt  # 企业微信消息推送
└── SmsStatusReceiver.kt   # 短信状态监控
```

### 核心类说明

| 类名 | 功能描述 |
|------|----------|
| `MainActivity` | 用户界面，配置管理，权限处理 |
| `SmsForwardService` | 前台服务，确保后台稳定运行 |
| `SmsReceiver` | 监听系统短信广播，处理转发逻辑 |
| `BootReceiver` | 设备启动时自动恢复服务 |
| `WechatWorkNotifier` | 企业微信API调用，消息格式化 |

## 📱 兼容性测试

### ✅ 已测试设备
- **小米15** - Android 15 ✅

### 🔍 权限需求

| 权限 | 用途 | 必要性 |
|------|------|--------|
| `RECEIVE_SMS` | 接收短信广播 | 必需 |
| `READ_SMS` | 读取短信内容 | 必需 |
| `READ_PHONE_STATE` | 获取设备状态 | 必需 |
| `INTERNET` | 网络请求发送消息 | 必需 |
| `POST_NOTIFICATIONS` | 显示通知 | Android 13+ |
| `REQUEST_IGNORE_BATTERY_OPTIMIZATIONS` | 电池优化白名单 | 推荐 |

## 🎨 用户界面

### 主界面特性
- **实时状态显示** - 清晰展示服务运行状态
- **权限检查** - 一键检测并引导权限设置
- **深色模式** - 自动适配系统主题


## 🔒 隐私与安全

- **本地处理** - 所有短信内容仅在设备本地处理
- **加密传输** - 使用HTTPS加密传输到企业微信
- **无数据收集** - 不收集、存储或分享用户个人信息
- **开源透明** - 完整源代码公开，可审计安全性

## 🐛 常见问题

### Q: 为什么收不到验证码短信？
A: 请检查：
1. 是否授予了短信读取权限
2. 是否开启了"仅推送验证码"模式
3. 企业微信机器人是否正常工作

### Q: 服务会自动停止吗？
A: 在Android 8.0+系统上，应用使用前台服务确保稳定运行，但仍建议：
1. 添加到电池优化白名单
2. 锁定应用在多任务界面
3. 允许自启动权限


## 🙏 致谢

- **AI助手** - GPT-5和Kimi-K2提供的智能编程支持
- **开源社区** - Android开源生态系统的贡献者们
- **企业微信** - 提供稳定的消息推送API

---

<div align="center">

**如果觉得这个项目对你有帮助，请给个⭐支持！**

[GitHub仓库](https://github.com/yourusername/SmsForwarder) | [问题反馈](https://github.com/yourusername/SmsForwarder/issues)

</div>